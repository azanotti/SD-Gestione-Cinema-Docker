<!DOCTYPE html>
<html>
<head>
    <title>Film Booking System - Payment</title>
    <link rel="stylesheet" href="../CSS/styles.css">
    
</head>
<body>
<!-- Top Bar -->
<div class="top-bar">
    <div class="top-bar">
        <a href="index.html">Home</a>
        <a href="movies.html">Acquista Biglietti</a>
        <a href="modificaprenotazione.html">Modifica Prenotazione</a>
        <a href="cancellaprenotazione.html">Cancella Prenotazione</a>
    </div>
</div>


<!-- Payment Page Content -->
<div id="full-width-div">
    <div class="top-bar">
        <a class="locked">Inserisci codice</a>
        <span class="indicator-triangle"></span>
        <a class="locked">Seleziona posti</a>
        <span class="indicator-triangle"></span>
        <a href="mostraprenotazione.html">Conferma</a>
    </div>
<h1>Film Booking System</h1>
<h2>Booking Details</h2>
<div id="bookingResult">

<script>
    const bookingData = sessionStorage.getItem("updateBookingData");

    //Get the bookingID from bookingData
    const bookingID = JSON.parse(bookingData).codice;
    let url = 'http://10.0.0.3:8080/prenotazione/' + bookingID;
    var provaElemento = document.getElementById("bookingResult");

        fetch(url)
            .then(response => response.json())
            .then(bookingInfo => {
                console.log(bookingInfo);

                // Create elements to display the booking information
                var bookingInfoElement = document.createElement("div");
                bookingInfoElement.className = "booking-info";

                var bookingCodeElement = document.createElement("p");
                bookingCodeElement.textContent = "Booking Code: " + bookingInfo.codice;

                var proiezioneElement = document.createElement("p");
                proiezioneElement.textContent = "Proiezione: " + bookingInfo.proiezione;

                var postiElement = document.createElement("p");
                postiElement.textContent = "Posti:";
                bookingInfo.posti.forEach(posto => {
                    var postoElement = document.createElement("span");
                    postoElement.textContent = "Numero: " + posto.numero + ", Fila: " + posto.fila + ", Codice: " + posto.codice;
                    postiElement.appendChild(postoElement);
                });

                // Append the elements to the container
                bookingInfoElement.appendChild(bookingCodeElement);
                bookingInfoElement.appendChild(proiezioneElement);
                bookingInfoElement.appendChild(postiElement);

                // Append the container to the main element
                provaElemento.appendChild(bookingInfoElement);
            })
            .catch(error => {
                console.log("Error fetching booking information:", error);
            });
    </script>
</div>
</body>
</html>
